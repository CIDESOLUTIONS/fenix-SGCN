# üîç AUDITOR√çA INTEGRAL Y PLAN DE ACCI√ìN - FENIX-SGCN

**Fecha:** 07 de octubre de 2025  
**Versi√≥n:** 1.0  
**Auditor:** Experto en Desarrollo Full Stack & ISO 22301

---

## üìä RESUMEN EJECUTIVO

### Estado General del Proyecto

**Progreso Documentado:** 86% (6/7 m√≥dulos completados seg√∫n ESTADO_ACTUAL.md)  
**Progreso Real Verificado:** 75% (con brechas significativas identificadas)  
**Nivel de Madurez:** **BETA AVANZADO** - Requiere completitud funcional frontend

### Hallazgos Principales

üü¢ **FORTALEZAS:**
- Backend robusto y bien arquitecturado (NestJS + Prisma)
- Motores transversales completamente funcionales
- M√≥dulo 1 (Planeaci√≥n) 100% funcional E2E ‚úÖ
- Base de datos dise√±ada seg√∫n mejores pr√°cticas
- Documentaci√≥n t√©cnica exhaustiva

üü° **√ÅREAS DE MEJORA:**
- Frontend desacoplado del backend en m√≥dulos 2-7
- Componentes UI incompletos o no conectados a APIs
- Falta integraci√≥n visual en mapas de dependencias
- Testing automatizado limitado
- 2 deudas t√©cnicas pendientes

üî¥ **CR√çTICO:**
- M√≥dulos 2-7: Backend completo pero frontend 40-60% implementado
- Experiencia de usuario fragmentada
- Sin validaci√≥n E2E completa salvo M√≥dulo 1

---

## üìã AN√ÅLISIS DETALLADO POR M√ìDULO

### **M√ìDULO 1: PLANEACI√ìN Y GOBIERNO** ‚úÖ 100%

#### Backend
| Componente | Estado | Observaciones |
|------------|--------|---------------|
| Servicio (18 m√©todos) | ‚úÖ 100% | Completo y funcional |
| Controlador (21 endpoints) | ‚úÖ 100% | REST completo |
| WorkflowEngine integrado | ‚úÖ 100% | Aprobaciones funcionales |
| Dgraph sincronizado | ‚úÖ 100% | Objetivos en grafo |
| Tests E2E | ‚úÖ 100% | Script automatizado pasando |

#### Frontend
| Componente | Estado | Observaciones |
|------------|--------|---------------|
| P√°gina principal 3 tabs | ‚úÖ 100% | Pol√≠ticas, Objetivos, RACI |
| CreatePolicyModal | ‚úÖ 100% | Editor funcional |
| CreateObjectiveModal | ‚úÖ 100% | Formulario SMART |
| RaciMatrixEditor | ‚úÖ 100% | Editor tabular interactivo |
| P√°gina detalle pol√≠tica | ‚úÖ 100% | Vista completa con acciones |

**VEREDICTO:** ‚úÖ **PRODUCTION-READY**  
**Evidencia:** Test E2E pasando, UI completa, flujos funcionales

---

### **M√ìDULO 2: AN√ÅLISIS DE RIESGOS (ARA)** ‚ö†Ô∏è 65%

#### Backend ‚úÖ 100%
| Componente | Estado | Observaciones |
|------------|--------|---------------|
| Servicio completo | ‚úÖ 100% | 370 l√≠neas, robusto |
| 10 endpoints REST | ‚úÖ 100% | CRUD + an√°lisis |
| Simulaci√≥n Montecarlo | ‚úÖ 100% | AnalyticsEngine integrado |
| Matriz de riesgos | ‚úÖ 100% | Heatmap 3x3 |
| Dgraph sincronizado | ‚úÖ 100% | Relaciones `affects` |
| WorkflowEngine | ‚úÖ 100% | Planes de tratamiento |

#### Frontend ‚ö†Ô∏è 40%
| Componente | Estado | Observaciones |
|------------|--------|---------------|
| P√°gina b√°sica | ‚úÖ Existe | `/dashboard/analisis-riesgos` |
| Formulario creaci√≥n | ‚ùå NO conectado | Modal no funcional |
| RiskHeatmap component | ‚ö†Ô∏è Parcial | Existe pero no integrado |
| Simulaci√≥n Montecarlo UI | ‚ùå NO implementada | Backend listo, UI falta |
| Comparaci√≥n estrategias | ‚ùå NO implementada | - |
| Tratamiento de riesgos UI | ‚ùå NO implementada | - |

**BRECHAS CR√çTICAS:**
1. **Modal de creaci√≥n NO funcional:** Usuario no puede crear riesgos desde UI
2. **Mapa de calor existe pero no actualiza:** Componente creado pero sin integraci√≥n API real
3. **Simulaci√≥n Montecarlo ausente:** Funcionalidad estrella sin interfaz gr√°fica
4. **Tratamiento de riesgos sin UI:** Workflows backend listos pero sin frontend

**VEREDICTO:** ‚ö†Ô∏è **REQUIERE COMPLETITUD FRONTEND (2-3 d√≠as)**

---

### **M√ìDULO 3: AN√ÅLISIS DE IMPACTO (BIA)** ‚ö†Ô∏è 70%

#### Backend ‚úÖ 100%
| Componente | Estado | Observaciones |
|------------|--------|---------------|
| Servicio completo | ‚úÖ 100% | Bien estructurado |
| 8 endpoints REST | ‚úÖ 100% | CRUD + an√°lisis |
| Priority Score autom√°tico | ‚úÖ 100% | Algoritmo implementado |
| Sugerencias RTO/RPO IA | ‚úÖ 100% | Benchmarks por criticidad |
| Campa√±a BIA con workflow | ‚úÖ 100% | WorkflowEngine integrado |
| An√°lisis SPOF | ‚úÖ 100% | Dgraph consultas |
| Cobertura del BIA | ‚úÖ 100% | Analytics completo |

#### Frontend ‚ö†Ô∏è 50%
| Componente | Estado | Observaciones |
|------------|--------|---------------|
| P√°gina b√°sica wizard | ‚úÖ Existe | `/dashboard/analisis-impacto` |
| Formulario BIA | ‚ö†Ô∏è Parcial | Campos b√°sicos, faltan avanzados |
| Mapa de dependencias | ‚ùå NO funcional | Componente BiaDependencyMapper creado pero no integrado |
| Sugerencias IA UI | ‚ùå NO visible | Backend funciona, bot√≥n falta |
| An√°lisis de cobertura | ‚ùå NO implementado | Dashboard pendiente |
| SPOF visualization | ‚ùå NO implementado | - |

**BRECHAS CR√çTICAS:**
1. **Mapa de dependencias drag-and-drop ausente:** Diferenciador clave del producto sin UI
2. **Sugerencias IA no visible:** Usuario no ve benchmarks autom√°ticos
3. **Campa√±as BIA sin panel:** Coordinaci√≥n masiva sin interfaz
4. **SPOF no visualizado:** An√°lisis cr√≠tico sin representaci√≥n gr√°fica

**VEREDICTO:** ‚ö†Ô∏è **REQUIERE INTEGRACI√ìN VISUAL (2-3 d√≠as)**

---

### **M√ìDULO 4: ESTRATEGIAS** ‚ö†Ô∏è 60%

#### Backend ‚úÖ 100%
| Componente | Estado | Observaciones |
|------------|--------|---------------|
| Servicio refactorizado | ‚úÖ 100% | 450 l√≠neas completas |
| 11 endpoints REST | ‚úÖ 100% | CRUD + an√°lisis avanzado |
| Motor recomendaci√≥n IA | ‚úÖ 100% | 5 estrategias autom√°ticas |
| Cost-effectiveness score | ‚úÖ 100% | Algoritmo implementado |
| Gap Analysis recursos | ‚úÖ 100% | Identificaci√≥n autom√°tica |
| Validaci√≥n vs RTO | ‚úÖ 100% | 3 reglas de validaci√≥n |
| WorkflowEngine aprobaci√≥n | ‚úÖ 100% | Flujos configurados |

#### Frontend ‚ö†Ô∏è 30%
| Componente | Estado | Observaciones |
|------------|--------|---------------|
| P√°gina b√°sica | ‚úÖ Existe | `/dashboard/estrategia` |
| Formulario estrategia | ‚ùå NO conectado | - |
| Motor recomendaci√≥n UI | ‚ùå NO implementado | Backend listo, UI falta |
| StrategyComparison | ‚ùå NO implementado | Componente clave ausente |
| Gap Analysis UI | ‚ùå NO implementado | - |
| Validaci√≥n visual | ‚ùå NO implementada | Alertas backend sin UI |

**BRECHAS CR√çTICAS:**
1. **Motor IA sin interfaz:** Recomendaciones autom√°ticas invisibles para usuario
2. **Comparaci√≥n de estrategias ausente:** Gr√°ficos comparativos no existen
3. **Gap Analysis sin visualizaci√≥n:** Brechas identificadas sin representaci√≥n
4. **Validaciones sin alertas visuales:** Errores backend sin feedback UI

**VEREDICTO:** üî¥ **CR√çTICO - FUNCIONALIDAD CLAVE SIN UI (3-4 d√≠as)**

---

### **M√ìDULO 5: PLANES DE CONTINUIDAD** ‚ö†Ô∏è 75%

#### Backend ‚úÖ 100%
| Componente | Estado | Observaciones |
|------------|--------|---------------|
| Servicio completo | ‚úÖ 100% | Sincronizaci√≥n Dgraph |
| Endpoints REST | ‚úÖ 100% | CRUD + operaciones |
| Workflow integrado | ‚úÖ 100% | Aprobaci√≥n + activaci√≥n |
| An√°lisis de impacto | ‚úÖ 100% | Dgraph upstream queries |
| Clonaci√≥n de planes | ‚úÖ 100% | Funcional |

#### Frontend ‚ö†Ô∏è 60%
| Componente | Estado | Observaciones |
|------------|--------|---------------|
| Listado de planes | ‚úÖ Funcional | `/dashboard/planes` |
| Vista detalle plan | ‚úÖ Funcional | - |
| Formulario b√°sico | ‚úÖ Funcional | Creaci√≥n simple |
| Editor drag-and-drop | ‚ùå NO implementado | **Diferenciador clave ausente** |
| Playbooks din√°micos | ‚ùå NO implementado | Secuencias visuales falta |
| Activaci√≥n de plan UI | ‚ö†Ô∏è Parcial | Bot√≥n existe, proceso incompleto |
| Mapa de dependencias | ‚úÖ Implementado | DependencyMap con ReactFlow |

**BRECHAS CR√çTICAS:**
1. **Editor visual drag-and-drop ausente:** Prometido en specs, no implementado
2. **Playbooks como flujos visuales:** Backend listo, UI est√°tica
3. **Actualizaci√≥n en cascada no visible:** Cambios autom√°ticos sin notificaci√≥n UI

**VEREDICTO:** ‚ö†Ô∏è **REQUIERE EDITOR VISUAL (3-4 d√≠as)**

---

### **M√ìDULO 6: PRUEBAS DE CONTINUIDAD** ‚ö†Ô∏è 65%

#### Backend ‚úÖ 100%
| Componente | Estado | Observaciones |
|------------|--------|---------------|
| Servicio creado | ‚úÖ 100% | 550 l√≠neas completas |
| 13 endpoints REST | ‚úÖ 100% | CRUD + ejecuci√≥n |
| Puntuaci√≥n automatizada | ‚úÖ 100% | Algoritmo 3 factores |
| An√°lisis de brechas | ‚úÖ 100% | 3 categor√≠as |
| Calendario ejercicios | ‚úÖ 100% | Vista anual |
| Reporte PDF | ‚úÖ 100% | ReportGenerator |

#### Frontend ‚ö†Ô∏è 40%
| Componente | Estado | Observaciones |
|------------|--------|---------------|
| P√°gina b√°sica | ‚úÖ Existe | `/dashboard/pruebas` |
| Listado ejercicios | ‚ö†Ô∏è Parcial | Sin calendario visual |
| ExerciseControlPanel | ‚ùå NO implementado | **Componente cr√≠tico ausente** |
| Ejecuci√≥n en tiempo real | ‚ùå NO implementada | - |
| Inyecci√≥n de eventos | ‚ùå NO implementada | - |
| Captura de evidencias | ‚ùå NO implementada | Multimedia sin UI |
| Reporte post-ejercicio | ‚ùå NO visible | PDF genera pero sin acceso UI |

**BRECHAS CR√çTICAS:**
1. **Panel de control ausente:** Ejecuci√≥n en tiempo real sin interfaz
2. **Inyecci√≥n de eventos sin UI:** Diferenciador competitivo invisible
3. **Evidencia multimedia no captura:** Fotos/videos backend sin frontend
4. **Calendario visual no existe:** Programaci√≥n anual sin visualizaci√≥n

**VEREDICTO:** üî¥ **CR√çTICO - ORQUESTACI√ìN SIN UI (4-5 d√≠as)**

---

### **M√ìDULO 7: MEJORA CONTINUA** ‚ö†Ô∏è 70%

#### Backend ‚úÖ 100%
| Componente | Estado | Observaciones |
|------------|--------|---------------|
| Servicio creado | ‚úÖ 100% | 600 l√≠neas, robusto |
| 15 endpoints REST | ‚úÖ 100% | Completo |
| Flujo CAPA | ‚úÖ 100% | Workflow 2 pasos |
| 7 KPIs calculados | ‚úÖ 100% | Algoritmos implementados |
| An√°lisis de causa ra√≠z | ‚úÖ 100% | 5 Whys, Ishikawa |
| Dashboard direcci√≥n | ‚úÖ 100% | Backend completo |
| Conversi√≥n gaps‚Üíhallazgos | ‚úÖ 100% | Integraci√≥n M√≥dulo 6 |
| Tendencias 12 meses | ‚úÖ 100% | An√°lisis hist√≥rico |
| Reporte PDF direcci√≥n | ‚úÖ 100% | 10 secciones ISO 9.3 |

#### Frontend ‚ö†Ô∏è 50%
| Componente | Estado | Observaciones |
|------------|--------|---------------|
| P√°gina b√°sica | ‚úÖ Existe | `/dashboard/improvements` |
| Listado hallazgos | ‚ö†Ô∏è Parcial | Sin filtros avanzados |
| Formulario hallazgo | ‚ö†Ô∏è Parcial | Campos b√°sicos |
| KPIDashboard | ‚ùå NO implementado | **Componente clave ausente** |
| Flujo CAPA UI | ‚ùå NO implementado | Workflow backend sin UI |
| RCA editor | ‚ùå NO implementado | 5 Whys sin interfaz |
| Dashboard direcci√≥n | ‚ùå NO implementado | Vista ejecutiva pendiente |
| Tendencias gr√°ficas | ‚ùå NO implementadas | Recharts pendiente |
| Conversi√≥n gaps bot√≥n | ‚ùå NO visible | Integraci√≥n sin UI |

**BRECHAS CR√çTICAS:**
1. **KPIs sin dashboard:** 7 indicadores calculados sin visualizaci√≥n
2. **Dashboard direcci√≥n ausente:** Revisi√≥n ISO 9.3 sin interfaz ejecutiva
3. **CAPA workflow invisible:** Usuario no ve flujo 2 pasos
4. **Tendencias sin gr√°ficos:** Datos hist√≥ricos sin representaci√≥n visual
5. **Conversi√≥n gaps-hallazgos oculta:** Ciclo mejora sin UI

**VEREDICTO:** üî¥ **CR√çTICO - DASHBOARD EJECUTIVO FALTANTE (3-4 d√≠as)**

---

## üî¨ AN√ÅLISIS DE MOTORES TRANSVERSALES

### **WorkflowEngine** ‚úÖ 100%
- ‚úÖ Bull + Redis funcional
- ‚úÖ 5 tipos de tareas
- ‚úÖ Notificaciones email
- ‚úÖ Recordatorios autom√°ticos
- ‚úÖ Integrado en todos los m√≥dulos

### **AnalyticsEngine** ‚úÖ 100%
- ‚úÖ Simulaci√≥n Montecarlo
- ‚úÖ An√°lisis de dependencias
- ‚úÖ SPOF identification
- ‚úÖ BIA coverage
- ‚úÖ ISO 22301 compliance checks

### **DgraphService** ‚úÖ 100%
- ‚úÖ Sincronizaci√≥n autom√°tica
- ‚úÖ Queries DQL complejas
- ‚úÖ Relaciones bidireccionales
- ‚úÖ An√°lisis upstream/downstream
- ‚úÖ Performance optimizado

### **ReportGenerator** ‚úÖ 100%
- ‚úÖ PDFKit funcional
- ‚úÖ Docxtemplater integrado
- ‚úÖ Plantillas ISO 22301
- ‚úÖ Reportes en 4 formatos

**VEREDICTO MOTORES:** ‚úÖ **EXCELENTE - Base s√≥lida para UI**

---

## üêõ DEUDAS T√âCNICAS IDENTIFICADAS

### **DT#1: Copiar/Pegar Im√°genes en Editor** (MEDIA)
**Archivo:** `frontend/components/RichTextEditor.tsx`  
**Problema:** ReactQuill con dynamic import no soporta paste events  
**Impacto:** UX - Bajo (workaround existe: bot√≥n de imagen)  
**Soluci√≥n:** Migrar a TipTap o Slate.js  
**Esfuerzo:** 8-16 horas

### **DT#2: SWOT Arrays Vac√≠os al Editar** (ALTA)
**Archivos:**
- `frontend/components/business-context/SwotEditor.tsx`
- `backend/src/business-context/business-context.service.ts`

**Problema:** Arrays (fortalezas, debilidades, etc.) no cargan al editar  
**Causa Ra√≠z:** Endpoint limitado + posible tipo de dato incorrecto en Prisma  
**Impacto:** UX - Alto (funcionalidad cr√≠tica no funciona)  
**Soluci√≥n:**
1. Verificar schema Prisma: `String[]` vs `Json`
2. Ajustar endpoint para incluir arrays completos
3. Validar serializaci√≥n backend
4. Testing exhaustivo

**Esfuerzo:** 4-8 horas

**PRIORIDAD:** üî¥ **RESOLVER ANTES DE PRODUCCI√ìN**

---

 d√≠as h√°biles, priorizando diferenciadores competitivos y cumplimiento ISO.

**Enfoque:** Desarrollo iterativo por prioridad, validaci√≥n E2E continua, refactorizaci√≥n m√≠nima.

---

### **FASE 1: CORRECCIONES CR√çTICAS** (2 d√≠as)

#### **Sprint 1.1: Deudas T√©cnicas** (1 d√≠a)
**Objetivo:** Resolver DT#2 (SWOT arrays) antes de continuar

**Tareas:**
1. ‚úÖ Verificar schema Prisma `swot_analyses`
   - Comando: `cd backend && npx prisma studio`
   - Revisar tipo de datos: `String[]` vs `Json`
   
2. ‚úÖ Ajustar endpoint `/api/business-context/swot/:id`
   ```typescript
   // backend/src/business-context/business-context.service.ts
   async findSwotById(id: string) {
     const swot = await this.prisma.swotAnalysis.findUnique({
       where: { id },
       // ‚úÖ ASEGURAR INCLUIR TODOS LOS CAMPOS
     });
     return swot;
   }
   ```

3. ‚úÖ Ajustar parseo frontend
   ```typescript
   // frontend/components/business-context/SwotEditor.tsx
   const parseArray = (data: any) => {
     if (Array.isArray(data)) return data;
     if (typeof data === 'string') return JSON.parse(data);
     return [];
   };
   ```

4. ‚úÖ Testing exhaustivo
   - Crear SWOT nuevo
   - Guardar con arrays
   - Editar y verificar carga
   - Guardar cambios

**Entregables:**
- ‚úÖ SWOT editor funcional 100%
- ‚úÖ Tests pasando
- ‚úÖ DT#2 cerrada

**Responsable:** Developer Backend + Frontend  
**Prioridad:** üî¥ P0

---

#### **Sprint 1.2: Verificaci√≥n Base** (1 d√≠a)
**Objetivo:** Validar estado actual de cada m√≥dulo con tests manuales

**Tareas:**
1. ‚úÖ Probar flujo completo M√≥dulo 1
   - Crear pol√≠tica ‚Üí Aprobar ‚Üí Publicar
   - Verificar notificaciones
   - Validar Dgraph sync

2. ‚úÖ Probar endpoints backend M√≥dulos 2-7
   - CRUD b√°sico cada entidad
   - Operaciones avanzadas (simulaciones, an√°lisis)
   - Verificar respuestas JSON

3. ‚úÖ Documentar estado real UI cada m√≥dulo
   - Componentes existentes
   - Conexiones API faltantes
   - Funcionalidad esperada vs real

**Entregables:**
- üìÑ Matriz de componentes UI (existentes vs faltantes)
- üìÑ Lista priorizada de endpoints a conectar
- üìÑ Casos de prueba E2E por m√≥dulo

**Responsable:** QA Lead  
**Prioridad:** üî¥ P0

---

### **FASE 2: DIFERENCIADORES COMPETITIVOS** (8 d√≠as)

#### **Sprint 2.1: Editor Visual Planes** (2 d√≠as)
**M√≥dulo:** 5 - Planes de Continuidad  
**Diferenciador:** Editor drag-and-drop con playbooks din√°micos

**Componente:** `PlanEditorDragDrop.tsx`

**Stack T√©cnico:**
- React Flow para editor visual
- Zustand para estado local
- React DnD para drag-and-drop adicional

**Tareas D√≠a 1:**
1. ‚úÖ Crear estructura base componente
   ```typescript
   // frontend/components/plans/PlanEditorDragDrop.tsx
   import ReactFlow, { 
     Node, Edge, Controls, Background 
   } from 'reactflow';
   
   interface PlanStep {
     id: string;
     type: 'task' | 'decision' | 'notification';
     label: string;
     description: string;
     responsible: string;
     estimatedTime: number;
   }
   
   export function PlanEditorDragDrop({ planId }: Props) {
     // Estado de nodos y edges
     // Handlers para agregar/eliminar/conectar
     // Guardado autom√°tico al backend
   }
   ```

2. ‚úÖ Implementar paleta de componentes
   - Tarea (c√≠rculo azul)
   - Decisi√≥n (rombo amarillo)
   - Notificaci√≥n (campana naranja)
   - Punto de control (cuadrado verde)

3. ‚úÖ Conectar a backend
   - POST `/continuity-plans/:id/steps` (nuevo endpoint)
   - GET plan con steps como JSON
   - Auto-save cada 30 segundos

**Tareas D√≠a 2:**
1. ‚úÖ Propiedades de cada nodo
   - Panel lateral con formulario
   - Edici√≥n inline
   - Validaci√≥n campos requeridos

2. ‚úÖ Exportar/Importar JSON
   - Serializaci√≥n del flujo
   - Import desde plantillas
   - Clonaci√≥n de planes

3. ‚úÖ Testing E2E
   - Crear plan visual
   - Guardar y recargar
   - Ejecutar desde UI

**Entregables:**
- ‚úÖ Componente PlanEditorDragDrop funcional
- ‚úÖ Endpoint backend `/steps` creado
- ‚úÖ Tests E2E pasando
- üìπ Video demo funcionalidad

**Responsable:** Senior Frontend Developer  
**Prioridad:** üî¥ P0

---

#### **Sprint 2.2: Mapa Dependencias Interactivo** (2 d√≠as)
**M√≥dulo:** 3 - BIA  
**Diferenciador:** Mapeo visual drag-and-drop multinivel

**Componente:** `BiaDependencyMapper.tsx` (refactorizar existente)

**Tareas D√≠a 1:**
1. ‚úÖ Refactorizar componente existente
   - Integrar con API real GET `/bia-assessments/:id`
   - Renderizar dependencias existentes
   - Estado local con Zustand

2. ‚úÖ Implementar drag-and-drop
   ```typescript
   const onDrop = (event: DragEvent) => {
     const type = event.dataTransfer.getData('nodeType');
     const position = screenToFlowPosition({ x: event.clientX, y: event.clientY });
     
     // Crear nuevo nodo
     const newNode = {
       id: `${type}-${Date.now()}`,
       type,
       position,
       data: { label: '', type }
     };
     
     setNodes((nds) => nds.concat(newNode));
   };
   ```

3. ‚úÖ Paleta de activos
   - Aplicaci√≥n (cuadrado morado)
   - Activo/Servidor (cuadrado verde)
   - Proveedor (cuadrado naranja)
   - Proceso (c√≠rculo azul)

**Tareas D√≠a 2:**
1. ‚úÖ An√°lisis SPOF en vivo
   - Detectar nodos con m√∫ltiples conexiones entrantes
   - Resaltar en rojo SPOFs identificados
   - Panel lateral con listado

2. ‚úÖ Sincronizaci√≥n Dgraph
   - POST guardar dependencias
   - Sincronizaci√≥n autom√°tica al grafo
   - Validaci√≥n de relaciones

3. ‚úÖ Testing E2E
   - Agregar dependencias
   - Identificar SPOF
   - Guardar y recargar

**Entregables:**
- ‚úÖ BiaDependencyMapper funcional completo
- ‚úÖ SPOF detection visual
- ‚úÖ Sincronizaci√≥n Dgraph verificada
- üìπ Video demo funcionalidad

**Responsable:** Senior Frontend Developer  
**Prioridad:** üî¥ P0

---

#### **Sprint 2.3: Motor Recomendaci√≥n Estrategias** (2 d√≠as)
**M√≥dulo:** 4 - Estrategias  
**Diferenciador:** Recomendaciones IA con comparaci√≥n visual

**Componentes:**
1. `StrategyRecommendationEngine.tsx`
2. `StrategyComparisonChart.tsx`
3. `GapAnalysisVisual.tsx`

**Tareas D√≠a 1:**
1. ‚úÖ Componente recomendaciones
   ```typescript
   // frontend/components/strategies/StrategyRecommendationEngine.tsx
   export function StrategyRecommendationEngine({ processId }: Props) {
     const { data: recommendations } = useFetch(
       `/continuity-strategies/recommend/${processId}`
     );
     
     return (
       <div className="space-y-4">
         {recommendations?.map(strategy => (
           <StrategyCard
             key={strategy.id}
             strategy={strategy}
             recommended={strategy.priority === 'HIGH'}
             onSelect={() => selectStrategy(strategy)}
           />
         ))}
       </div>
     );
   }
   ```

2. ‚úÖ Tarjetas de estrategia
   - Badge prioridad (HIGH/MEDIUM/LOW)
   - Iconos por tipo (REDUNDANCY, RECOVERY, etc.)
   - M√©tricas: costo, tiempo, efectividad
   - Justificaci√≥n IA visible

**Tareas D√≠a 2:**
1. ‚úÖ Gr√°fico comparaci√≥n (Recharts)
   ```typescript
   // frontend/components/strategies/StrategyComparisonChart.tsx
   <BarChart data={strategies}>
     <Bar dataKey="cost" fill="#FC913A" name="Costo (USD)" />
     <Bar dataKey="effectiveness" fill="#10B981" name="Efectividad" />
     <Bar dataKey="implementationTime" fill="#FF4E50" name="Tiempo (d√≠as)" />
   </BarChart>
   ```

2. ‚úÖ Gap Analysis visual
   - Tabla brechas de recursos
   - Iconos por tipo (INFRASTRUCTURE, NETWORK, etc.)
   - C√°lculo costo total
   - Bot√≥n "Convertir a Acciones"

3. ‚úÖ Validaci√≥n en vivo
   - Alertas ERROR/WARNING
   - Validaci√≥n vs RTO
   - Feedback visual inmediato

**Entregables:**
- ‚úÖ 3 componentes funcionales
- ‚úÖ Integraci√≥n API completa
- ‚úÖ Gr√°ficos interactivos
- üìπ Video demo funcionalidad

**Responsable:** Mid-Senior Frontend Developer  
**Prioridad:** üî¥ P0

---

#### **Sprint 2.4: Panel Control Ejercicios** (2 d√≠as)
**M√≥dulo:** 6 - Pruebas  
**Diferenciador:** Orquestaci√≥n tiempo real con inyecciones

**Componente:** `ExerciseControlPanel.tsx`

**Tareas D√≠a 1:**
1. ‚úÖ Dise√±o panel principal
   ```typescript
   // frontend/components/exercises/ExerciseControlPanel.tsx
   export function ExerciseControlPanel({ exerciseId }: Props) {
     const { data: exercise, refetch } = useFetch(`/exercises/${exerciseId}`);
     const [elapsed, setElapsed] = useState(0);
     
     useEffect(() => {
       if (exercise?.status === 'IN_PROGRESS') {
         const interval = setInterval(() => {
           setElapsed(prev => prev + 1);
         }, 1000);
         return () => clearInterval(interval);
       }
     }, [exercise?.status]);
     
     return (
       <div className="grid grid-cols-3 gap-6">
         <div className="col-span-2">
           {/* Timeline y eventos */}
         </div>
         <div>
           {/* Panel control lateral */}
         </div>
       </div>
     );
   }
   ```

2. ‚úÖ Cron√≥metro y m√©tricas
   - Tiempo transcurrido vs RTO
   - Barra progreso visual
   - Indicador: A tiempo / Retrasado / Excedido
   - Tareas completadas vs totales

**Tareas D√≠a 2:**
1. ‚úÖ Inyecci√≥n de eventos
   ```typescript
   const handleInjectEvent = async () => {
     await fetch(`/exercises/${exerciseId}/inject-event`, {
       method: 'POST',
       body: JSON.stringify({
         type: 'INJECTION',
         description: injectionText,
         severity: 'MEDIUM'
       })
     });
     refetch();
   };
   ```

2. ‚úÖ Log de eventos en vivo
   - Lista con scroll
   - C√≥digo de colores por tipo
   - Timestamps precisos
   - Filtros por tipo

3. ‚úÖ Completar tareas
   - Checklist interactiva
   - Captura de notas
   - Subida de evidencias (placeholder)
   - Marcado autom√°tico timestamp

**Entregables:**
- ‚úÖ ExerciseControlPanel funcional
- ‚úÖ Inyecciones en tiempo real
- ‚úÖ Scoring autom√°tico visible
- üìπ Video demo funcionalidad

**Responsable:** Senior Frontend Developer  
**Prioridad:** üî¥ P0

---

### **FASE 3: DASHBOARD EJECUTIVO Y KPIs** (3 d√≠as)

#### **Sprint 3.1: Dashboard KPIs Mejora Continua** (2 d√≠as)
**M√≥dulo:** 7 - Mejora Continua  
**Componente:** `KPIDashboard.tsx`

**Tareas D√≠a 1:**
1. ‚úÖ 4 KPI Cards principales
   ```typescript
   <div className="grid grid-cols-4 gap-4">
     <KPICard
       title="Tasa Resoluci√≥n"
       value={kpis.findingResolutionRate}
       target={80}
       suffix="%"
       icon={<CheckCircle />}
       trend="up"
     />
     <KPICard
       title="Tiempo Cierre"
       value={kpis.avgActionClosureTime}
       target={30}
       suffix=" d√≠as"
       icon={<Clock />}
       trend="down"
     />
     {/* ... 2 KPIs m√°s */}
   </div>
   ```

2. ‚úÖ Gr√°fico tendencias 12 meses
   ```typescript
   <LineChart data={trends}>
     <Line dataKey="resolvedFindings" stroke="#10B981" name="Resueltos" />
     <Line dataKey="newFindings" stroke="#FF4E50" name="Nuevos" />
     <Line dataKey="completedActions" stroke="#FC913A" name="Acciones" />
   </LineChart>
   ```

**Tareas D√≠a 2:**
1. ‚úÖ Gr√°fico hallazgos por fuente
   - PieChart (Recharts)
   - Colores por fuente
   - Tooltip con detalles

2. ‚úÖ M√©tricas adicionales
   - Ejercicios realizados
   - BIA coverage
   - Planes actualizados

3. ‚úÖ Indicadores de alerta
   - Rojo: KPI <70% objetivo
   - Amarillo: 70-90%
   - Verde: >90%

**Entregables:**
- ‚úÖ KPIDashboard funcional
- ‚úÖ 7 KPIs visualizados
- ‚úÖ Gr√°ficos interactivos
- üìπ Video demo funcionalidad

**Responsable:** Mid Frontend Developer  
**Prioridad:** üî¥ P0

---

#### **Sprint 3.2: Dashboard Revisi√≥n Direcci√≥n** (1 d√≠a)
**M√≥dulo:** 7 - Mejora Continua  
**Componente:** `ManagementReviewDashboard.tsx`

**Tareas:**
1. ‚úÖ Layout ejecutivo
   - 8 secciones ISO 9.3
   - Dise√±o limpio, profesional
   - Exportar PDF

2. ‚úÖ Integraci√≥n API
   - GET `/continuous-improvement/management-review/dashboard`
   - Renderizar todas las secciones
   - Bot√≥n "Descargar Reporte PDF"

3. ‚úÖ Recomendaciones autom√°ticas
   - Badge por prioridad
   - Iconos de alerta
   - Acciones sugeridas

**Entregables:**
- ‚úÖ ManagementReviewDashboard funcional
- ‚úÖ PDF descargable
- ‚úÖ Vista ejecutiva completa
- üìπ Video demo funcionalidad

**Responsable:** Mid Frontend Developer  
**Prioridad:** üü° P1

---

### **FASE 4: FUNCIONALIDADES AVANZADAS** (4 d√≠as)

#### **Sprint 4.1: Simulaci√≥n Montecarlo UI** (1 d√≠a)
**M√≥dulo:** 2 - Riesgos  
**Componente:** `MonteCarloSimulation.tsx`

**Tareas:**
1. ‚úÖ Formulario par√°metros
   - Impacto: min, most, max (triangular)
   - Probabilidad: min, max
   - Iteraciones: slider

2. ‚úÖ Gr√°ficos resultados
   - Histograma distribuci√≥n
   - L√≠nea probabilidad acumulada
   - Estad√≠sticas: mean, median, P90, P95, P99

3. ‚úÖ Interpretaci√≥n ejecutiva
   - "90% probabilidad < $X"
   - Recomendaci√≥n presupuesto
   - Comparaci√≥n escenarios

**Entregables:**
- ‚úÖ MonteCarloSimulation funcional
- ‚úÖ Gr√°ficos interactivos
- üìπ Video demo

**Responsable:** Mid Frontend Developer  
**Prioridad:** üü° P1

---

#### **Sprint 4.2: Matriz Riesgos Interactiva** (1 d√≠a)
**M√≥dulo:** 2 - Riesgos  
**Componente:** `RiskHeatmap.tsx` (refactorizar)

**Tareas:**
1. ‚úÖ Grid 3x3 interactivo
2. ‚úÖ Fetch data real `/risk-assessments/heatmap`
3. ‚úÖ Celdas clickeables ‚Üí Lista riesgos
4. ‚úÖ C√≥digo de colores

**Entregables:**
- ‚úÖ RiskHeatmap funcional completo
- üìπ Video demo

**Responsable:** Junior-Mid Frontend Developer  
**Prioridad:** üü° P1

---

#### **Sprint 4.3: Sugerencias IA Visibles** (1 d√≠a)
**M√≥dulo:** 3 - BIA  
**Componente:** `RtoRpoSuggestions.tsx`

**Tareas:**
1. ‚úÖ Bot√≥n "Obtener Sugerencias IA"
2. ‚úÖ GET `/bia-assessments/process/:id/suggest-rto-rpo`
3. ‚úÖ Mostrar sugerencia con explicaci√≥n
4. ‚úÖ Bot√≥n "Aplicar" ‚Üí Autocompletar formulario

**Entregables:**
- ‚úÖ Sugerencias IA visibles
- üìπ Video demo

**Responsable:** Junior Frontend Developer  
**Prioridad:** üü° P1

---

#### **Sprint 4.4: Conversi√≥n Gaps‚ÜíHallazgos** (1 d√≠a)
**M√≥dulo:** 7 (integraci√≥n con 6)  
**Componente:** Bot√≥n en `ExerciseGapAnalysis.tsx`

**Tareas:**
1. ‚úÖ An√°lisis gaps despu√©s de ejercicio
2. ‚úÖ Bot√≥n "Convertir en Hallazgo"
3. ‚úÖ POST `/continuous-improvement/exercises/:id/convert-gap`
4. ‚úÖ Redirecci√≥n a hallazgo creado

**Entregables:**
- ‚úÖ Ciclo mejora cerrado visualmente
- üìπ Video demo

**Responsable:** Junior-Mid Frontend Developer  
**Prioridad:** üü° P1

---

### **FASE 5: REFINAMIENTO Y TESTING** (3 d√≠as)

#### **Sprint 5.1: Testing E2E Completo** (2 d√≠as)

**Objetivo:** Scripts automatizados para todos los m√≥dulos

**Tareas D√≠a 1:**
1. ‚úÖ Scripts PowerShell/Bash m√≥dulos 2-7
   - test-module-2.ps1 (ARA)