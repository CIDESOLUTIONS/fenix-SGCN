<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infografía: El Estado de la Continuidad del Negocio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        .flow-step {
            border-color: #FC913A;
            color: #1a202c;
        }
        .flow-arrow {
            color: #FF4E50;
        }
        .modal-overlay {
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transition: transform 0.3s ease;
        }
        .loader {
            border-top-color: #10B981;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="container mx-auto p-4 md:p-8">

        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-6xl font-black text-gray-900 leading-tight">La Brecha de Resiliencia</h1>
            <p class="text-xl md:text-2xl mt-4 text-gray-600">¿Está su negocio realmente preparado para lo inesperado?</p>
            <div class="mt-8 bg-white rounded-lg shadow-xl p-6 max-w-2xl mx-auto border-l-4 border-[#FF4E50]">
                <p class="text-5xl md:text-7xl font-bold text-[#FF4E50]">75%</p>
                <p class="text-lg mt-2">de las empresas sin un plan o con un plan de continuidad de negocio estático no probado, fracasan a los tres años de sufrir un desastre.</p>
            </div>
        </header>

        <main class="grid grid-cols-1 md:grid-cols-2 gap-8">

            <div class="md:col-span-2 bg-white rounded-lg shadow-lg p-6 flex flex-col md:h-[550px]">
                <h2 class="text-2xl font-bold text-gray-900 mb-1">El Panorama Moderno de Amenazas</h2>
                <p class="text-gray-600 mb-4">Las interrupciones ya no son una cuestión de "si", sino de "cuándo" y "con qué frecuencia". El volumen y la variedad de amenazas están en constante aumento.</p>
                <div class="chart-container flex-grow">
                    <canvas id="threatLandscapeChart"></canvas>
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-lg p-6 flex flex-col justify-center items-center text-center md:h-[550px]">
                 <h2 class="text-2xl font-bold text-gray-900 mb-2">El Alto Costo del Tiempo de Inactividad (USD)</h2>
                 <p class="text-gray-600 mb-4">Cada minuto de interrupción tiene un impacto directo y cuantificable en sus resultados financieros y en su reputación.</p>
                <p class="text-6xl font-extrabold text-[#FC913A] my-4">USD $15,000+</p>
                <p class="text-lg font-semibold">Costo promedio por HORA de inactividad para una empresa mediana.</p>
            </div>

            <div class="bg-white rounded-lg shadow-lg p-6 flex flex-col md:h-[550px]">
                 <h2 class="text-2xl font-bold text-gray-900 mb-1">¿De Dónde Vienen los Costos? (USD)</h2>
                 <p class="text-gray-600 mb-4">El impacto financiero es multifacético, afectando ingresos, productividad y la confianza del cliente.</p>
                <div class="chart-container flex-grow">
                    <canvas id="downtimeCostsChart"></canvas>
                </div>
            </div>

            <div class="md:col-span-2 bg-white rounded-lg shadow-lg p-6 flex flex-col justify-center md:h-[550px]">
                <h2 class="text-2xl font-bold text-center text-gray-900 mb-2">Fallas Comunes: El "Método Antiguo"</h2>
                <p class="text-center text-gray-600 mb-8 max-w-3xl mx-auto">Depender de hojas de cálculo y documentos estáticos crea un ciclo de vulnerabilidad donde los planes están desconectados de la realidad operativa del negocio.</p>
                <div class="flex flex-col md:flex-row items-center justify-center space-y-4 md:space-y-0 md:space-x-4">
                    <div class="flow-step text-center p-4 border-2 rounded-lg w-48">
                        <h3 class="font-bold">BIA Estático</h3>
                        <p class="text-sm">Análisis obsoleto en hojas de cálculo.</p>
                    </div>
                    <div class="flow-arrow text-4xl font-bold hidden md:block">&rarr;</div>
                    <div class="flow-arrow text-4xl font-bold md:hidden">&darr;</div>
                    <div class="flow-step text-center p-4 border-2 rounded-lg w-48">
                        <h3 class="font-bold">Riesgos Aislados</h3>
                        <p class="text-sm">Evaluación sin conexión a los procesos críticos.</p>
                    </div>
                    <div class="flow-arrow text-4xl font-bold hidden md:block">&rarr;</div>
                     <div class="flow-arrow text-4xl font-bold md:hidden">&darr;</div>
                    <div class="flow-step text-center p-4 border-2 rounded-lg w-48">
                        <h3 class="font-bold">Planes Desactualizados</h3>
                        <p class="text-sm">Documentos que nadie revisa ni actualiza.</p>
                    </div>
                    <div class="flow-arrow text-4xl font-bold hidden md:block">&rarr;</div>
                     <div class="flow-arrow text-4xl font-bold md:hidden">&darr;</div>
                    <div class="flow-step text-center p-4 border-2 rounded-lg w-48">
                        <h3 class="font-bold">Pruebas Ineficaces</h3>
                        <p class="text-sm">Ejercicios teóricos sin lecciones aprendidas.</p>
                    </div>
                </div>
                <div class="text-center mt-8">
                    <button id="gemini-trigger" class="bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-3 px-6 rounded-lg shadow-md transition-transform transform hover:scale-105">
                        ✨ Generar el 'Método Inteligente' con IA
                    </button>
                </div>
            </div>

            <div class="md:col-span-2 bg-white rounded-lg shadow-lg p-6 flex flex-col md:h-[550px]">
                <h2 class="text-2xl font-bold text-gray-900 mb-1">Pilares de un SGCN Moderno</h2>
                <p class="text-gray-600 mb-4">La resiliencia se logra con un enfoque integrado y dinámico. Compare la madurez de una gestión tradicional con la de una plataforma integrada.</p>
                <div class="chart-container flex-grow">
                    <canvas id="maturityRadarChart"></canvas>
                </div>
            </div>

             <div class="md:col-span-2 bg-white rounded-lg shadow-lg p-6 flex flex-col md:h-[550px]">
                <h2 class="text-2xl font-bold text-gray-900 mb-1">El Retorno de la Inversión en Resiliencia</h2>
                <p class="text-gray-600 mb-4">Invertir en una gestión de continuidad proactiva no solo reduce las pérdidas potenciales, sino que acelera la recuperación y fortalece el negocio.</p>
                <div class="chart-container flex-grow">
                    <canvas id="roiChart"></canvas>
                </div>
            </div>

        </main>

        <footer class="text-center mt-12 py-8 border-t border-gray-300">
            <h3 class="text-3xl font-black text-gray-900">Renazca de las cenizas de la interrupción.</h3>
            <p class="text-xl mt-2 text-gray-600">Descubra cómo Fenix-SGCN puede transformar su resiliencia organizacional.</p>
        </footer>

    </div>
    
    <div id="gemini-modal" class="modal-overlay fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50 opacity-0">
        <div class="modal-content bg-white rounded-lg shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto p-6 transform scale-95">
            <div class="flex items-center justify-between pb-3 border-b">
                <h3 class="text-2xl font-bold text-emerald-600">✨ El Método Inteligente, por Gemini</h3>
                <button id="close-modal" class="text-gray-500 hover:text-gray-800 text-3xl">&times;</button>
            </div>
            <div id="gemini-response" class="mt-4 prose max-w-none">
                <div id="loader-container" class="flex flex-col items-center justify-center text-center p-8">
                    <div class="loader ease-linear rounded-full border-8 border-t-8 border-gray-200 h-24 w-24 mb-4"></div>
                    <p class="text-lg text-gray-600">Consultando a la IA para revolucionar su estrategia...</p>
                </div>
            </div>
        </div>
    </div>


    <script>
        Chart.register(ChartDataLabels);

        const energeticPalette = {
            coral: '#FF4E50',
            orange: '#FC913A',
            yellow: '#F9D423',
            lightGreen: '#E1F5C4',
            darkText: '#1a202c',
        };

        function wrapLabel(label, maxWidth) {
            if (label.length <= maxWidth) {
                return label;
            }
            const words = label.split(' ');
            const lines = [];
            let currentLine = '';
            for (const word of words) {
                if ((currentLine + ' ' + word).trim().length > maxWidth) {
                    lines.push(currentLine.trim());
                    currentLine = word;
                } else {
                    currentLine = (currentLine + ' ' + word).trim();
                }
            }
            if (currentLine) {
                lines.push(currentLine.trim());
            }
            return lines;
        }

        const tooltipTitleCallback = (tooltipItems) => {
            const item = tooltipItems[0];
            let label = item.chart.data.labels[item.dataIndex];
            if (Array.isArray(label)) {
                return label.join(' ');
            } else {
                return label;
            }
        };
        
        const commonChartOptions = {
            maintainAspectRatio: false,
            responsive: true,
            plugins: {
                legend: {
                    position: 'top',
                     labels: {
                        color: energeticPalette.darkText,
                        font: {
                            family: "'Inter', sans-serif",
                            weight: '600'
                        }
                    }
                },
                tooltip: {
                    callbacks: {
                        title: tooltipTitleCallback
                    },
                    backgroundColor: '#ffffff',
                    titleColor: '#1a202c',
                    bodyColor: '#4a5568',
                    borderColor: '#e2e8f0',
                    borderWidth: 1,
                    padding: 10,
                    titleFont: {
                        weight: 'bold',
                        size: 14,
                        family: "'Inter', sans-serif"
                    },
                    bodyFont: {
                        family: "'Inter', sans-serif"
                    }
                }
            },
            scales: {
                y: {
                    ticks: { color: energeticPalette.darkText },
                    grid: { color: '#e2e8f0' }
                },
                x: {
                    ticks: { color: energeticPalette.darkText },
                    grid: { display: false }
                }
            }
        };

        const threatLandscapeCtx = document.getElementById('threatLandscapeChart').getContext('2d');
        new Chart(threatLandscapeCtx, {
            type: 'bar',
            data: {
                labels: ['Ciberataques', 'Interrupciones en la Cadena de Suministro', 'Desastres Naturales', 'Fallas Tecnológicas', 'Pandemias'],
                datasets: [{
                    label: 'Incidentes Reportados (2024)',
                    data: [120, 85, 40, 75, 15],
                    backgroundColor: energeticPalette.orange,
                    borderColor: energeticPalette.orange,
                    borderWidth: 1
                }, {
                    label: 'Incidentes Reportados (2025)',
                    data: [250, 150, 55, 90, 25],
                    backgroundColor: energeticPalette.coral,
                    borderColor: energeticPalette.coral,
                    borderWidth: 1
                }]
            },
            options: commonChartOptions
        });

        const downtimeCostsCtx = document.getElementById('downtimeCostsChart').getContext('2d');
        new Chart(downtimeCostsCtx, {
            type: 'doughnut',
            data: {
                labels: ['Pérdida de Ingresos', 'Pérdida de Productividad', 'Daño Reputacional', 'Multas Regulatorias'],
                datasets: [{
                    label: 'Distribución de Costos (USD)',
                    data: [50, 30, 15, 5],
                    backgroundColor: [
                        energeticPalette.coral,
                        energeticPalette.orange,
                        energeticPalette.yellow,
                        energeticPalette.lightGreen
                    ],
                    hoverOffset: 4
                }]
            },
            options: { 
                ...commonChartOptions, 
                plugins: {
                    ...commonChartOptions.plugins,
                    datalabels: {
                        formatter: (value, ctx) => {
                            return value + '%';
                        },
                        color: '#fff',
                        font: {
                            weight: 'bold',
                            size: 16,
                            family: "'Inter', sans-serif"
                        }
                    }
                },
                scales: { 
                    x: { display: false }, 
                    y: { display: false } 
                } 
            }
        });

        const maturityRadarCtx = document.getElementById('maturityRadarChart').getContext('2d');
        const radarLabels = [
            'Análisis de Contexto', 
            wrapLabel('Análisis de Impacto (BIA) Dinámico', 16), 
            wrapLabel('Gestión de Riesgos Integrada', 16), 
            'Planes Accionables', 
            'Pruebas y Ejercicios', 
            'Mejora Continua'
        ];
        new Chart(maturityRadarCtx, {
            type: 'radar',
            data: {
                labels: radarLabels,
                datasets: [{
                    label: 'Gestión Tradicional',
                    data: [6, 4, 3, 5, 2, 2],
                    fill: true,
                    backgroundColor: 'rgba(252, 145, 58, 0.2)',
                    borderColor: energeticPalette.orange,
                    pointBackgroundColor: energeticPalette.orange,
                }, {
                    label: 'Plataforma Integrada (Fenix)',
                    data: [9, 9, 8, 9, 8, 9],
                    fill: true,
                    backgroundColor: 'rgba(16, 185, 129, 0.2)',
                    borderColor: '#10B981',
                    pointBackgroundColor: '#10B981',
                }]
            },
            options: {
                ...commonChartOptions,
                scales: {
                    r: {
                        angleLines: { color: '#e2e8f0' },
                        grid: { color: '#e2e8f0' },
                        pointLabels: { 
                            color: energeticPalette.darkText, 
                            font: { size: 12, weight: 'bold', family: "'Inter', sans-serif" } 
                        },
                        ticks: {
                            color: energeticPalette.darkText,
                            backdropColor: 'rgba(255, 255, 255, 0.75)'
                        },
                        suggestedMin: 0,
                        suggestedMax: 10
                    }
                }
            }
        });

        const roiCtx = document.getElementById('roiChart').getContext('2d');
        new Chart(roiCtx, {
            type: 'bar',
            data: {
                labels: ['Antes de SGCN', 'Después de SGCN'],
                datasets: [
                {
                    label: 'Pérdida Financiera Potencial (USD)',
                    data: [100, 25],
                    backgroundColor: energeticPalette.coral,
                },
                {
                    label: 'Tiempo de Recuperación (Horas)',
                    data: [72, 8],
                    backgroundColor: energeticPalette.orange,
                },
                 {
                    label: 'Costo de Cumplimiento (USD)',
                    data: [40, 15],
                    backgroundColor: energeticPalette.yellow,
                }
            ]
            },
            options: {
                ...commonChartOptions,
                scales: {
                    x: { stacked: false },
                    y: { stacked: false, beginAtZero: true, title: { display: true, text: 'Valor (USD en miles) / Horas' } }
                },
                indexAxis: 'y',
            }
        });
        
        // Gemini API Integration
        const geminiTrigger = document.getElementById('gemini-trigger');
        const modal = document.getElementById('gemini-modal');
        const closeModalButton = document.getElementById('close-modal');
        const responseContainer = document.getElementById('gemini-response');
        const loaderContainer = document.getElementById('loader-container');

        const showModal = () => {
            modal.classList.remove('hidden');
            setTimeout(() => {
                modal.classList.remove('opacity-0');
                modal.querySelector('.modal-content').classList.remove('scale-95');
            }, 10);
        };

        const hideModal = () => {
            modal.classList.add('opacity-0');
            modal.querySelector('.modal-content').classList.add('scale-95');
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 300);
        };
        
        geminiTrigger.addEventListener('click', async () => {
            showModal();
            responseContainer.innerHTML = '';
            responseContainer.appendChild(loaderContainer);
            loaderContainer.style.display = 'flex';

            const systemPrompt = "Actúas como un consultor experto mundial en resiliencia organizacional y sistemas de gestión de continuidad de negocio ISO 22301. Tu objetivo es transformar procesos manuales y obsoletos en flujos de trabajo modernos, dinámicos e impulsados por IA.";
            const userQuery = "El método antiguo y manual para la gestión de la continuidad del negocio se basa en estos pasos: 1. BIA Estático (Análisis obsoleto en hojas de cálculo). 2. Riesgos Aislados (Evaluación sin conexión a los procesos críticos). 3. Planes Desactualizados (Documentos que nadie revisa ni actualiza). 4. Pruebas Ineficaces (Ejercicios teóricos sin lecciones aprendidas). Describe el 'Método Inteligente' Fenix, explicando cómo la IA y la automatización transforman cada uno de estos pasos para crear un sistema de gestión vivo, proactivo y verdaderamente resiliente. Estructura tu respuesta en 4 puntos, uno para cada paso transformado. Usa un tono inspirador y profesional. Para cada punto, usa un título en negrita.";
            
            try {
                const generatedText = await callGemini(userQuery, systemPrompt);
                loaderContainer.style.display = 'none';
                
                const formattedText = generatedText
                    .replace(/\*\*(.*?)\*\*/g, '<strong class="text-gray-800">$1</strong>')
                    .replace(/\n/g, '<br/>');

                responseContainer.innerHTML = `<div class="space-y-4 text-gray-600">${formattedText}</div>`;

            } catch (error) {
                loaderContainer.style.display = 'none';
                responseContainer.innerHTML = `<p class="text-red-500">Error al contactar a la IA. Por favor, inténtelo de nuevo más tarde.</p><p class="text-sm text-gray-500 mt-2">${error.message}</p>`;
                console.error("Gemini API Error:", error);
            }
        });

        closeModalButton.addEventListener('click', hideModal);
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                hideModal();
            }
        });

        async function callGemini(userQuery, systemPrompt, retries = 3, delay = 1000) {
            const apiKey = "";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                },
            };

            for (let i = 0; i < retries; i++) {
                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const result = await response.json();
                    const candidate = result.candidates?.[0];

                    if (candidate && candidate.content?.parts?.[0]?.text) {
                        return candidate.content.parts[0].text;
                    } else {
                        throw new Error("Respuesta inesperada de la API de Gemini.");
                    }
                } catch (error) {
                    if (i === retries - 1) throw error;
                    await new Promise(res => setTimeout(res, delay * Math.pow(2, i)));
                }
            }
             throw new Error("No se pudo obtener respuesta de la API después de varios intentos.");
        }
    </script>
</body>
</html>